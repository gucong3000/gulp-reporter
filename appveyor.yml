version: "{build}"
skip_branch_with_pr: true
skip_tags: true
build: off

environment:
  matrix:
    - nodejs_version: stable
    - nodejs_version: 6

# Install scripts. (runs after repo cloning)
install:
  # install Node.js
  - ps: Install-Product node $env:nodejs_version
  - npm install -g npm@latest
  # install modules
  - npm install


# to run your custom scripts instead of automatic tests
test_script:
  - npm test

# to run your custom scripts instead of provider deployments
after_test:
  - npm run report-coverage
  - git diff --name-only > git_diff.log || echo ""
  - git diff --cached --name-only >> git_diff.log || echo ""
  - test ! -s git_diff.log || 7z a shorturl.zip @git_diff.log && appveyor PushArtifact shorturl.zip
